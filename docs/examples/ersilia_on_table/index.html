<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper plugin-docs plugin-id-default docs-version-current docs-doc-page docs-doc-id-examples/ersilia_on_table" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.8.1">
<title data-rh="true">Integration with Ersilia Hub Models | TidyScreen</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:image" content="https://alfredoq.github.io/TidyScreen_v2_docs_new/img/tidyscreen_logo.png"><meta data-rh="true" name="twitter:image" content="https://alfredoq.github.io/TidyScreen_v2_docs_new/img/tidyscreen_logo.png"><meta data-rh="true" property="og:url" content="https://alfredoq.github.io/TidyScreen_v2_docs_new/docs/examples/ersilia_on_table"><meta data-rh="true" property="og:locale" content="en"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="Integration with Ersilia Hub Models | TidyScreen"><meta data-rh="true" name="description" content="The capabilities for the management and prioritization of a given chemical space within TidyScreen can be further extended by applying ML/AI models provided by the Ersilia Models Hub, which is developed and maintained by the Ersilia Open-Source Initiative."><meta data-rh="true" property="og:description" content="The capabilities for the management and prioritization of a given chemical space within TidyScreen can be further extended by applying ML/AI models provided by the Ersilia Models Hub, which is developed and maintained by the Ersilia Open-Source Initiative."><link data-rh="true" rel="icon" href="/TidyScreen_v2_docs_new/img/tidyscreen_logo.png"><link data-rh="true" rel="canonical" href="https://alfredoq.github.io/TidyScreen_v2_docs_new/docs/examples/ersilia_on_table"><link data-rh="true" rel="alternate" href="https://alfredoq.github.io/TidyScreen_v2_docs_new/docs/examples/ersilia_on_table" hreflang="en"><link data-rh="true" rel="alternate" href="https://alfredoq.github.io/TidyScreen_v2_docs_new/docs/examples/ersilia_on_table" hreflang="x-default"><script data-rh="true" type="application/ld+json">{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Integration with Ersilia Hub Models","item":"https://alfredoq.github.io/TidyScreen_v2_docs_new/docs/examples/ersilia_on_table"}]}</script><link rel="alternate" type="application/rss+xml" href="/TidyScreen_v2_docs_new/blog/rss.xml" title="TidyScreen RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/TidyScreen_v2_docs_new/blog/atom.xml" title="TidyScreen Atom Feed"><link rel="stylesheet" href="/TidyScreen_v2_docs_new/assets/css/styles.f7cb7648.css">
<script src="/TidyScreen_v2_docs_new/assets/js/runtime~main.0841026f.js" defer="defer"></script>
<script src="/TidyScreen_v2_docs_new/assets/js/main.2055a793.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<svg xmlns="http://www.w3.org/2000/svg" style="display: none;"><defs>
<symbol id="theme-svg-external-link" viewBox="0 0 24 24"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"/></symbol>
</defs></svg>
<script>!function(){var t="light";var e=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return window.localStorage.getItem("theme")}catch(t){}}();document.documentElement.setAttribute("data-theme",e||t),document.documentElement.setAttribute("data-theme-choice",e||t)}(),function(){try{const c=new URLSearchParams(window.location.search).entries();for(var[t,e]of c)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id="__docusaurus"><link rel="preload" as="image" href="/TidyScreen_v2_docs_new/img/tidyscreen_logo.png"><link rel="preload" as="image" href="/TidyScreen_v2_docs_new/img/emolecules_table_screenshot.png"><link rel="preload" as="image" href="/TidyScreen_v2_docs_new/img/tables_subsets_screenshot.png"><link rel="preload" as="image" href="/TidyScreen_v2_docs_new/img/emolecules_subset_20_0.png"><link rel="preload" as="image" href="/TidyScreen_v2_docs_new/img/subsetting_by_props.png"><link rel="preload" as="image" href="/TidyScreen_v2_docs_new/img/coprinet_table.png"><div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="theme-layout-navbar navbar navbar--fixed-top"><div class="navbar__inner"><div class="theme-layout-navbar-left navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/TidyScreen_v2_docs_new/"><div class="navbar__logo"><img src="/TidyScreen_v2_docs_new/img/tidyscreen_logo.png" alt="TidyScreen" class="themedComponent_mlkZ themedComponent--light_NVdE"><img src="/TidyScreen_v2_docs_new/img/tidyscreen_logo.png" alt="TidyScreen" class="themedComponent_mlkZ themedComponent--dark_xIcU"></div><b class="navbar__title text--truncate">HomePage</b></a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/TidyScreen_v2_docs_new/docs/project_overview">Documentation</a></div><div class="theme-layout-navbar-right navbar__items navbar__items--right"><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="system mode" aria-label="Switch between dark and light mode (currently system mode)"><svg viewBox="0 0 24 24" width="24" height="24" aria-hidden="true" class="toggleIcon_g3eP lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" aria-hidden="true" class="toggleIcon_g3eP darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" aria-hidden="true" class="toggleIcon_g3eP systemToggleIcon_QzmC"><path fill="currentColor" d="m12 21c4.971 0 9-4.029 9-9s-4.029-9-9-9-9 4.029-9 9 4.029 9 9 9zm4.95-13.95c1.313 1.313 2.05 3.093 2.05 4.95s-0.738 3.637-2.05 4.95c-1.313 1.313-3.093 2.05-4.95 2.05v-14c1.857 0 3.637 0.737 4.95 2.05z"></path></svg></button></div><div class="navbarSearchContainer_Bca1"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="theme-layout-main main-wrapper mainWrapper_z2l0"><div class="docsWrapper_hBAB"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docRoot_UBD9"><aside class="theme-doc-sidebar-container docSidebarContainer_YfHR"><div class="sidebarViewport_aRkj"><div class="sidebar_njMd"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/TidyScreen_v2_docs_new/docs/project_overview">Overview of the project</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/TidyScreen_v2_docs_new/docs/installation">Installation and Dependencies</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/TidyScreen_v2_docs_new/docs/information_flow">Information flow</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/TidyScreen_v2_docs_new/docs/chemspace/compounds_input">ChemSpace</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/TidyScreen_v2_docs_new/docs/chemspace_analysis/">ChemSpace Analysis</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/TidyScreen_v2_docs_new/docs/template_page">MolDock</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/TidyScreen_v2_docs_new/docs/template_page">MolDock Analysis</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/TidyScreen_v2_docs_new/docs/template_page">MolDyn</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/TidyScreen_v2_docs_new/docs/template_page">MolDyn Analysis</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" role="button" aria-expanded="true" href="/TidyScreen_v2_docs_new/docs/examples/chemical_space_synthesis">Tutorials</a></div><ul class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/TidyScreen_v2_docs_new/docs/examples/chemical_space_synthesis">Chemical space synthesis</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/TidyScreen_v2_docs_new/docs/examples/docking">Molecular Docking studies</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/TidyScreen_v2_docs_new/docs/examples/ersilia_on_table">Integration with Ersilia Hub Models</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/TidyScreen_v2_docs_new/docs/examples/LA_Workshop">1st Latin American hands-on workshop on open source AI/ML guided drug discovery</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/TidyScreen_v2_docs_new/docs/examples/molecules_preparation">Molecules preparation</a></li></ul></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/TidyScreen_v2_docs_new/docs/contact">Contact</a></li></ul></nav></div></div></aside><main class="docMainContainer_TBSr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/TidyScreen_v2_docs_new/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">Tutorials</span></li><li class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link">Integration with Ersilia Hub Models</span></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>Integration with Ersilia Hub Models</h1></header><p>The capabilities for the management and prioritization of a given chemical space within TidyScreen can be further extended by applying ML/AI models provided by the <a href="https://www.ersilia.io/model-hub" target="_blank" rel="noopener noreferrer">Ersilia Models Hub</a>, which is developed and maintained by the <a href="https://www.ersilia.io/" target="_blank" rel="noopener noreferrer">Ersilia Open-Source Initiative</a>.</p>
<p>In this example, we will further extend on the <a href="/TidyScreen_v2_docs_new/docs/examples/chemical_space_synthesis">chemical space tutorial</a>, since we are particularly interested in applying a ML model to predict the price of a set of reactants prior to combinatorialy enumerating the synthetic virtual chemical space.</p>
<p>In a nutshell, the steps involved in the procedure are the following:</p>
<ul>
<li>Filtering of the reactant of interest from the emolecules database (specifically primary and secondary amines);</li>
<li>Subsetting of the resulting libraries using <em>drug-like</em> properties;</li>
<li>Prediction of the corresponding building blocks prices based on the <a href="https://www.ersilia.io/models-details?recordId=recmMLJH20FNos6oW" target="_blank" rel="noopener noreferrer"><em>eos7a45</em></a> model included in the <a href="https://www.ersilia.io/model-hub" target="_blank" rel="noopener noreferrer">Ersilia Models Hub</a>;</li>
<li>Subsetting of the reactants based on custom price filtering by using terminal-based SQL statements.</li>
</ul>
<div class="theme-admonition theme-admonition-tip admonition_xJq3 alert alert--success"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 12 16"><path fill-rule="evenodd" d="M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"></path></svg></span>TIP</div><div class="admonitionContent_BuS1"><p>If you already know how to use TidyScreen to read molecules, subset by functional groups and execute filtering workflows, you can directly <a href="#custom-anchor">skip</a> the section dedicated to properties computation using Ersilia Hub Model.</p></div></div>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="step-1-initial-reactants-filtering">STEP 1: Initial reactants filtering<a href="#step-1-initial-reactants-filtering" class="hash-link" aria-label="Direct link to STEP 1: Initial reactants filtering" title="Direct link to STEP 1: Initial reactants filtering">​</a></h4>
<div class="language-python codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-python codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic"># Import required modules</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token operator" style="color:#393A34">&gt;&gt;</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">from</span><span class="token plain"> tidyscreen </span><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> tidyscreen </span><span class="token keyword" style="color:#00009f">as</span><span class="token plain"> ts</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token operator" style="color:#393A34">&gt;&gt;</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">from</span><span class="token plain"> tidyscreen</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">chemspace </span><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> chemspace </span><span class="token keyword" style="color:#00009f">as</span><span class="token plain"> chemspace</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic"># Create a dedicated project for the synthesis</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token operator" style="color:#393A34">&gt;&gt;</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> ts</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">create_project</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;$HOME/Desktop/example&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;price_filtering&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic"># Activate the project just created</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token operator" style="color:#393A34">&gt;&gt;</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> price_filtering </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> ts</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">ActivateProject</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;price_filtering&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic"># Activate the ChemSpace section of the project</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token operator" style="color:#393A34">&gt;&gt;</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> price_filtering_chemspace </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> chemspace</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">ChemSpace</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">price_filtering</span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre></div></div>
<p>Next, import the whole <a href="https://www.emolecules.com/" target="_blank" rel="noopener noreferrer">eMolecules</a> database into the project database.</p>
<div class="language-python codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-python codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic"># Input the eMolecules database into ChemSpace from the corresponding &#x27;emolecules.csv&#x27; file&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token operator" style="color:#393A34">&gt;&gt;</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> price_filtering_chemspace</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">input_csv</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;$PATH/TO/emolecules.csv&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic"># Note_1: we are not providing the full archive corresponding to the emolecules database. The user can obtain it upon request to the authors.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic"># Note_2: the input of the whole eMolecules database may take a while to load, since it contains millions of molecules.</span><br></span></code></pre></div></div>
<p>Upon reading the reactants, a table named <code>emolecules</code> in the <code>chemspace.db</code> database located within the <code>$PROJECT_PATH/chemspace/processed_data/</code> folder. A quick snapshot of the generated table is shown in Figure 3:</p>
<p>Upon reading the reactants, a table named <code>emolecules</code> in the <code>chemspace.db</code> database located within the <code>$PROJECT_PATH/chemspace/processed_data/</code> folder. A quick snapshot of the generated table is shown in Figure 3:</p>
<hr>
<figure><p align="center"><img src="/TidyScreen_v2_docs_new/img/emolecules_table_screenshot.png" alt="Description of image" width="500"></p><figcaption><strong>Figure 3:</strong> Screenshot of the table corresponding to the read eMolecules database.</figcaption><p></p></figure>
<hr>
<p>Once the reactants <code>emolecules</code> table has been created, <a href="https://www.daylight.com/dayhtml/doc/theory/theory.smarts.html" target="_blank" rel="noopener noreferrer">SMARTS</a> filtering procedures can be applied to select the required building blocks. As a first step, lest check the available SMARTS filters. In this case, built-in filters provided upon TidyScreen installation are shown:</p>
<div class="language-python codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-python codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic"># List available SMARTS filters to obtain reactants</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token operator" style="color:#393A34">&gt;&gt;</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> price_filtering_chemspace</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">list_available_smarts_filters</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic"># Outputs:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token operator" style="color:#393A34">&gt;&gt;</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> Available SMARTS filters</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token operator" style="color:#393A34">&gt;&gt;</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> Filter_id</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> Filter_Name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> Aminoacids</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> SMARTS</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">NX3H2</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">NX4</span><span class="token operator" style="color:#393A34">+</span><span class="token plain">H3</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">CX4H</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">[</span><span class="token operator" style="color:#393A34">*</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">CX3H0</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">(</span><span class="token operator" style="color:#393A34">=</span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">OX1</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">OX2H</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">OX1</span><span class="token operator" style="color:#393A34">-</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token operator" style="color:#393A34">&gt;&gt;</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">.</span><span class="token punctuation" style="color:#393A34">.</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token operator" style="color:#393A34">&gt;&gt;</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> Filter_id</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">10</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> Filter_Name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> Aldehydes</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> SMARTS</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">CX3H1</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">(</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">O</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">[</span><span class="token comment" style="color:#999988;font-style:italic">#6]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token operator" style="color:#393A34">&gt;&gt;</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> Filter_id</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">11</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> Filter_Name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> PrimAmines</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> SMARTS</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">NX3</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain">H2</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain">!$</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">NC</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">O</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token operator" style="color:#393A34">&gt;&gt;</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> Filter_id</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">12</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> Filter_Name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> SecAmines</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> SMARTS</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">NX3</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain">H1</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain">!$</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">NC</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">O</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">.</span><span class="token punctuation" style="color:#393A34">.</span><span class="token punctuation" style="color:#393A34">.</span><br></span></code></pre></div></div>
<p>As you can see in the output, althought there are custom filters matching primary (id: 11) OR secondary amines (id: 12) included by default, there is no current filter matching BOTH of them. Consequently, we can add our own custom filter:</p>
<div class="language-python codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-python codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic"># Add a custom filter indicating the SMARTS, followed by a description of the filter</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token operator" style="color:#393A34">&gt;&gt;</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> price_filtering_chemspace</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">add_smarts_filter</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;[NX3;H1,H2;!$(NC=O)]&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token string" style="color:#e3116c">&quot;Primary_and_Secondary_Amines&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><br></span></code></pre></div></div>
<p>When listing again, we can see that the filter has been added to the local TidyScreen installation with <code>id:54</code>:</p>
<div class="language-python codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-python codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic"># List available SMARTS filters to obtain reactants</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token operator" style="color:#393A34">&gt;&gt;</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> price_filtering_chemspace</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">list_available_smarts_filters</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic"># Outputs:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token operator" style="color:#393A34">&gt;&gt;</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> Available SMARTS filters</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token operator" style="color:#393A34">&gt;&gt;</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> Filter_id</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> Filter_Name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> Aminoacids</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> SMARTS</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">NX3H2</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">NX4</span><span class="token operator" style="color:#393A34">+</span><span class="token plain">H3</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">CX4H</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">[</span><span class="token operator" style="color:#393A34">*</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">CX3H0</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">(</span><span class="token operator" style="color:#393A34">=</span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">OX1</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">OX2H</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">OX1</span><span class="token operator" style="color:#393A34">-</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token operator" style="color:#393A34">&gt;&gt;</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">.</span><span class="token punctuation" style="color:#393A34">.</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token operator" style="color:#393A34">&gt;&gt;</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> Filter_id</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">10</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> Filter_Name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> Aldehydes</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> SMARTS</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">CX3H1</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">(</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">O</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">[</span><span class="token comment" style="color:#999988;font-style:italic">#6]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token operator" style="color:#393A34">&gt;&gt;</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> Filter_id</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">11</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> Filter_Name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> PrimAmines</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> SMARTS</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">NX3</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain">H2</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain">!$</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">NC</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">O</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token operator" style="color:#393A34">&gt;&gt;</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> Filter_id</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">12</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> Filter_Name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> SecAmines</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> SMARTS</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">NX3</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain">H1</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain">!$</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">NC</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">O</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">.</span><span class="token punctuation" style="color:#393A34">.</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token operator" style="color:#393A34">&gt;&gt;</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> Filter_id</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">54</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> Filter_Name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> Primary_and_Secondary_Amines</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> SMARTS</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">NX3</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain">H1</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">H2</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain">!$</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">NC</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">O</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">]</span><br></span></code></pre></div></div>
<p>From a synthetic point of view and due to the underlying reaction mechanism, there are also additional requisites related to the building blocks structure that further imposes decoration limitations. Please refer to the <a href="/TidyScreen_v2_docs_new/docs/examples/chemical_space_synthesis">chemical space tutorial</a> for further details.</p>
<p>Overall, we need to concatenate multiple filters in a single <strong>filtering workflow</strong> so as to comply with all the above-mentioned criteria at once. The required procedure is:</p>
<div class="language-python codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-python codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic"># Create a workflow to filter primary and secondary amines (54:1) for A3 coupling reactions reactions</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token operator" style="color:#393A34">&gt;&gt;</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> price_filtering_chemspace</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">create_smarts_filters_workflow</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">{</span><span class="token number" style="color:#36acaa">54</span><span class="token punctuation" style="color:#393A34">:</span><span class="token number" style="color:#36acaa">1</span><span class="token punctuation" style="color:#393A34">,</span><span class="token number" style="color:#36acaa">10</span><span class="token punctuation" style="color:#393A34">:</span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">,</span><span class="token number" style="color:#36acaa">4</span><span class="token punctuation" style="color:#393A34">:</span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">,</span><span class="token number" style="color:#36acaa">5</span><span class="token punctuation" style="color:#393A34">:</span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">,</span><span class="token number" style="color:#36acaa">25</span><span class="token punctuation" style="color:#393A34">:</span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">,</span><span class="token number" style="color:#36acaa">35</span><span class="token punctuation" style="color:#393A34">:</span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">,</span><span class="token number" style="color:#36acaa">21</span><span class="token punctuation" style="color:#393A34">:</span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">,</span><span class="token number" style="color:#36acaa">53</span><span class="token punctuation" style="color:#393A34">:</span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">,</span><span class="token number" style="color:#36acaa">2</span><span class="token punctuation" style="color:#393A34">:</span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">,</span><span class="token number" style="color:#36acaa">17</span><span class="token punctuation" style="color:#393A34">:</span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">,</span><span class="token number" style="color:#36acaa">6</span><span class="token punctuation" style="color:#393A34">:</span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">,</span><span class="token number" style="color:#36acaa">7</span><span class="token punctuation" style="color:#393A34">:</span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">,</span><span class="token number" style="color:#36acaa">8</span><span class="token punctuation" style="color:#393A34">:</span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">,</span><span class="token number" style="color:#36acaa">9</span><span class="token punctuation" style="color:#393A34">:</span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre></div></div>
<p>Once created, available reactants filtering workflows can be listed:</p>
<div class="language-python codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-python codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic"># List available filtering workflows</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token operator" style="color:#393A34">&gt;&gt;</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> price_filtering_chemspace</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">list_available_smarts_filters_workflows</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">### Outputs</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token operator" style="color:#393A34">&gt;&gt;</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> Available SMARTS filters workflows</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic"># Workflow to filter primary AND secondary amines</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token operator" style="color:#393A34">&gt;&gt;</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> Workflow_id</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">2</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> Filter_Specs</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token string" style="color:#e3116c">&quot;54&quot;</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;10&quot;</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">,</span><span class="token string" style="color:#e3116c">&quot;4&quot;</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;5&quot;</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;25&quot;</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;35&quot;</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;21&quot;</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;53&quot;</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">,</span><span class="token string" style="color:#e3116c">&quot;2&quot;</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;17&quot;</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;6&quot;</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;7&quot;</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;8&quot;</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;9&quot;</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> Description</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> Filter primary amines </span><span class="token keyword" style="color:#00009f">for</span><span class="token plain"> A3 coupling reactions</span><br></span></code></pre></div></div>
<p>A filtering workflow can be applied on a given table (i.e. <code>emolecules</code>) that has already been stored in the <code>chemspace.db</code> using:</p>
<div class="language-python codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-python codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic"># Apply workflow_filter_id: 1 on the &#x27;emolecules&#x27; table</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token operator" style="color:#393A34">&gt;&gt;</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> price_filtering_chemspace</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">subset_table_by_smarts_workflow</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;emolecules&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token number" style="color:#36acaa">1</span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre></div></div>
<p>Upon executing the filter, a table named <code>tables_subsets</code> will be created in <code>chemspace.db</code> with the objective of registering the filtering action:</p>
<hr>
<figure><p align="center"><img src="/TidyScreen_v2_docs_new/img/tables_subsets_screenshot.png" alt="Description of image" width="1000"></p><figcaption><strong>Figure 4:</strong> Screenshot of the <code>tables_subsets</code> containing the filtering actions.</figcaption><p></p></figure>
<hr>
<p>The info included in the <code>tables_subsets</code> is:</p>
<ul>
<li><code>table_name</code>: the source table on which the filtering workflow was applied.</li>
<li><code>subset_name</code>: the destination table to which the filtered compounds were written. This name is automatically created incrementally.</li>
<li><code>filtering_type</code>: the kind of filtering that originated the destination table. In this case <code>emolecules_subset_1</code> was created by using SMARTS filtering (filtering <code>by_properties</code> is also possible, as we will see later)</li>
<li><code>prop_filter</code>: explicit indication ot the filtering workflow applied.</li>
<li><code>description</code>: this is requested to the used as descriptive information upon executing the filtering workflow.</li>
</ul>
<p>In this specific example, the resulting filtered tables contained:</p>
<ul>
<li><em><strong>Primary/Secondary amines:</strong></em> 1,420,273</li>
</ul>
<p>The numbered of filtered compounds may vary depending on the version of the initial database you are using.</p>
<p>A random set of primary/secondary amines table can be depicted:</p>
<div class="language-python codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-python codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic"># Randomly depict 25 primary amines</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token operator" style="color:#393A34">&gt;&gt;</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> price_filtering_chemspace</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">depict_ligand_table</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;emolecules_subset_2&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> limit</span><span class="token operator" style="color:#393A34">=</span><span class="token number" style="color:#36acaa">25</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">random</span><span class="token operator" style="color:#393A34">=</span><span class="token boolean" style="color:#36acaa">True</span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre></div></div>
<p>The resulting depictions is:</p>
<ul>
<li><strong>Primary/Secondary amines</strong> -&gt; 25 / 1,420,273</li>
</ul>
<hr>
<figure><p align="center"><img src="/TidyScreen_v2_docs_new/img/emolecules_subset_20_0.png" alt="Description of image" width="1000"></p><figcaption><strong>Figure 7:</strong> Set of 25 randomly picked <strong>amines</strong>.</figcaption><p></p></figure>
<hr>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="step-2-prioritization-considering-drug-like-properties">STEP 2: Prioritization considering <em>drug-like</em> properties<a href="#step-2-prioritization-considering-drug-like-properties" class="hash-link" aria-label="Direct link to step-2-prioritization-considering-drug-like-properties" title="Direct link to step-2-prioritization-considering-drug-like-properties">​</a></h4>
<p>A new round of filtering/prioritization criteria, such as by <em>drug-like</em> properties, may be accomplished on the resulting subsets. In this way, different physicochemical properties can be computed for the corresponding table subset as follows:</p>
<div class="language-python codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-python codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">## By default the properties are computed: [&quot;MolWt&quot;,&quot;MolLogP&quot;,&quot;NumHDonors&quot;,&quot;NumHAcceptors&quot;,&quot;NumRotatableBonds&quot;,&quot;TPSA&quot;]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">### You can specify whatever property computed by RDKit you wan using the &#x27;properties_list&#x27; keyword</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token operator" style="color:#393A34">&gt;&gt;</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> price_filtering_chemspace</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">compute_properties</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;emolecules_subset_1&quot;</span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre></div></div>
<p>After computing the properties on <code>emolecules_subset_1</code>, it is now possible to subset a given table containing computed properties. As an example, lets use the following criteria:</p>
<ul>
<li><code>MolWt</code> &gt;= 200 and <code>MolWt</code> &lt;= 500</li>
<li><code>MolLogP</code> &gt;=1.5 and <code>MolLogP</code> &lt;= 3</li>
<li><code>NumRotatableBonds</code> &lt;= 2</li>
</ul>
<p>In order to combine the filtering criteria, it is possible to construct a <em>Python</em> list indicating the threshold values as follows: <code>[&quot;MolWt&gt;=200&quot;,&quot;MolWt&lt;=500&quot;,&quot;MolLogP&gt;=1.5&quot;,&quot;MolLogP&lt;=3&quot;,&quot;NumRotatableBonds&lt;=2&quot;]</code>. This list can now be passed the corresponding subsetting method in TidyScreen:</p>
<div class="language-python codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-python codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic"># Subset &#x27;emolecules_subset_1&#x27; using the given properties thresholds</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token operator" style="color:#393A34">&gt;&gt;</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> price_filtering_chemspace</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">subset_table_by_properties</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;emolecules_subset_1&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token punctuation" style="color:#393A34">[</span><span class="token string" style="color:#e3116c">&quot;MolWt&gt;=200&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token string" style="color:#e3116c">&quot;MolWt&lt;=500&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token string" style="color:#e3116c">&quot;MolLogP&gt;=1.5&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token string" style="color:#e3116c">&quot;MolLogP&lt;=3&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token string" style="color:#e3116c">&quot;NumRotatableBonds&lt;=2&quot;</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre></div></div>
<p>After executing the filtering, a record of the action will be stored in the <code>tables_subsets</code> table:</p>
<hr>
<figure><p align="center"><img src="/TidyScreen_v2_docs_new/img/subsetting_by_props.png" alt="Description of image" width="1000"></p><figcaption><strong>Figure 10:</strong> Screenshot of the <code>tables_subsets</code>which registers the filtering/subseting actions.</figcaption><p></p></figure>
<hr>
<p>As can be seen the table <code>emolecules_subset_1_subset_4</code> has been created based on the corresponding filtering workflow. It is advisable to retain this table name for tracebility of the reactants filterings history. If the user wants to copy this subsetted table with a more comprehensive name, it can be done as follows:</p>
<div class="language-python codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-python codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">## Copy the subseted table with a new name</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token operator" style="color:#393A34">&gt;&gt;</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> price_filtering_chemspace</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">copy_table_to_new_name</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;emolecules_subset_1_subset_4&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token string" style="color:#e3116c">&quot;aldehydes_for_A3_coupling&quot;</span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre></div></div>
<p>In case the user wants to save the filtered table as a <code>.csv</code> file for storing purposes use:</p>
<a id="custom-anchor"></a>
<div class="language-python codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-python codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic"># Save a .csv file with the filtered table</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token operator" style="color:#393A34">&gt;&gt;</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> price_filtering_chemspace</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">save_table_to_csv</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;emolecules_subset_1_subset_4&quot;</span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre></div></div>
<p>Overall, the final list of prioritized primary and secondary amines contains 137158 reactants. <a href="https://github.com/alfredoq/TidyScreen_v2_docs_new/blob/main/example_files/Amines_filtered_druglike.csv" target="_blank" rel="noopener noreferrer">Link to the csv file</a></p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="step-3-predicting-prices-using-ersilia-hub-models">STEP 3: Predicting prices using Ersilia Hub Models<a href="#step-3-predicting-prices-using-ersilia-hub-models" class="hash-link" aria-label="Direct link to STEP 3: Predicting prices using Ersilia Hub Models" title="Direct link to STEP 3: Predicting prices using Ersilia Hub Models">​</a></h4>
<p>The diverse set of models as provided by the Ersilia Hub  can be applied a to table containing smiles strings. In this example we will use the model <a href="https://www.ersilia.io/models-details?recordId=recmMLJH20FNos6oW" target="_blank" rel="noopener noreferrer"><em>eos7a45</em></a> in order to predict reactants prices, which will be afterwards used to prioritize building blocks based on lowering the budget of a screening campaign.</p>
<p>In order to apply a model, the Ersilia Model Hub should be installed in the system as is indicated by the <a href="https://github.com/alfredoq/TidyScreen_v2" target="_blank" rel="noopener noreferrer">README.md</a> file of the TidyScreen repository. Once installed, the procedure to generate the prediction on a given table is:</p>
<div class="language-python codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-python codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token operator" style="color:#393A34">&gt;&gt;</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> price_filtering_chemspace</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">apply_ersilia_model_on_table</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;emolecules_subset_1_subset_2&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token string" style="color:#e3116c">&quot;eos7a45&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># The first string indicates the table on which to compute predictions</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># The second table is an identifier of the Ersilia Model</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre></div></div>
<p>Once executed, the table will contain one or more columns (depending on the model output feature - check the Ersilia catalog -) which is named: <em>&#x27;model_name_feature_name&#x27;</em>. In this particular case, only one feature is outputed by the <a href="https://www.ersilia.io/models-details?recordId=recmMLJH20FNos6oW" target="_blank" rel="noopener noreferrer"><em>eos7a45</em></a> model, with the feature being named <em>&#x27;coprinet&#x27;</em>, so the the name of the calculated column will be <em>&#x27;eos7a45_coprinet&#x27;</em>. The Figure below shows an overview of the corresponding table.</p>
<hr>
<figure><p align="center"><img src="/TidyScreen_v2_docs_new/img/coprinet_table.png" alt="Description of image" width="1000"></p><figcaption><strong>Figure 10:</strong> Screenshot of the <code>tables_subsets</code>which registers the filtering/subseting actions.</figcaption><p></p></figure>
<hr>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="step-4-subseting-price-ranges">STEP 4: Subseting price ranges<a href="#step-4-subseting-price-ranges" class="hash-link" aria-label="Direct link to STEP 4: Subseting price ranges" title="Direct link to STEP 4: Subseting price ranges">​</a></h4>
<p>Once computed, price ranges may be subseted by using the <em>subset_table_by_properties()</em> functions, as is explained in the <a href="/TidyScreen_v2_docs_new/docs/examples/chemical_space_synthesis">chemical space tutorial</a> tutorial.</p>
<p>In this case, we will se a different approach, consisting in the use of SQL statements in the bash console.</p>
<p>The following SQL statement will select the 50 lowest prices (excluding NULL values arising from prediction computation):</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$ sqlite3 chemspace.db &quot;SELECT * FROM emolecules_subset_1_subset_2 WHERE eos7a45_coprinet IS NOT NULL ORDER BY  eos7a45_coprinet ASC LIMIT 50;&quot;</span><br></span></code></pre></div></div>
<p>The filtering will be printed to the console. In case the user wants to create a new table with the filtered molecules, it can be done as follows:</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$ sqlite3 chemspace.db &quot;CREATE TABLE lowest_price_amines AS SELECT * FROM emolecules_subset_1_subset_2 WHERE eos7a45_coprinet IS NOT NULL ORDER BY  eos7a45_coprinet ASC LIMIT 50;&quot;</span><br></span></code></pre></div></div>
<p>The subseted table can now be further used on further TidyScreen procedures.</p></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="row margin-top--sm theme-doc-footer-edit-meta-row"><div class="col"><a href="https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/examples/ersilia_on_table.md" target="_blank" rel="noopener noreferrer" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_Z9Sw" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_JAkA"></div></div></footer></article><nav class="docusaurus-mt-lg pagination-nav" aria-label="Docs pages"><a class="pagination-nav__link pagination-nav__link--prev" href="/TidyScreen_v2_docs_new/docs/examples/docking"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Molecular Docking studies</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/TidyScreen_v2_docs_new/docs/examples/LA_Workshop"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">1st Latin American hands-on workshop on open source AI/ML guided drug discovery</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"></div></div></div></div></main></div></div></div><footer class="theme-layout-footer footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="theme-layout-footer-column col footer__col"><div class="footer__title">Docs</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/TidyScreen_v2_docs_new/docs/documentation_index">Documentation</a></li><li class="footer__item"><a class="footer__link-item" href="/TidyScreen_v2_docs_new/docs/contact">Contact</a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">MedChemLab - Faculty of Chemical Sciences, National University of Córdoba, Argentina. 2025.</div></div></div></footer></div>
</body>
</html>